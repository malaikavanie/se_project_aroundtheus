!function(){"use strict";class e{constructor(e,t,r,s){this._name=e.name,this._link=e.link,this._id=e._id,this._cardSelector=t,this.handleImageClick=r,this._handleDeleteClick=s}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}getId(){return this._id}_setEventListeners(){this._imageElement.addEventListener("click",(()=>{this.handleImageClick(this._name,this._link)})),this._likeButton.addEventListener("click",(()=>{this._likeCard()})),this._deleteButton.addEventListener("click",(()=>{this._handleDeleteClick(this)}))}deleteCard(){this._element.remove(),this._element=null}_likeCard(){this._likeButton.classList.toggle("card__like-button_active")}generateCard(){return this._element=this._getTemplate(),this._imageElement=this._element.querySelector(".card__image"),this._likeButton=this._element.querySelector(".card__like-button"),this._deleteButton=this._element.querySelector(".card__delete-button"),this._setEventListeners(),this._imageElement.setAttribute("src",this._link),this._imageElement.setAttribute("alt",this._name),this._element.querySelector(".card__title").textContent=this._name,this._element}}class t{constructor(e,t){let{inputSelector:r,submitButtonSelector:s,inactiveButtonClass:i,inputErrorClass:n,errorClass:o}=t;this._formElement=e,this._inputSelector=r,this._submitButtonSelector=s,this._inactiveButtonClass=i,this._inputErrorClass=n,this._errorClass=o}_showInputError=e=>{e.classList.add(this._inputErrorClass),this._errorElement.textContent=e.validationMessage,this._errorElement.classList.add(this._errorClass)};_hideInputError=e=>{e.classList.remove(this._inputErrorClass),this._errorElement.classList.remove(this._errorClass),this._errorElement.textContent=""};_checkInputValidity=e=>{this._errorElement=this._formElement.querySelector(`#${e.id}-error`),e.validity.valid?this._hideInputError(e):this._showInputError(e)};_hasInvalidInput=e=>e.some((e=>!e.validity.valid));_toggleButtonState=e=>{this._hasInvalidInput(e)?this.disableSubmit():(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.removeAttribute("disabled"))};_setEventListeners(){const e=Array.from(this._formElement.querySelectorAll(this._inputSelector));this._buttonElement=this._formElement.querySelector(this._submitButtonSelector),this._toggleButtonState(e),e.forEach((t=>{t.addEventListener("input",(()=>{this._checkInputValidity(t),this._toggleButtonState(e)}))}))}checkValidity(){const e=Array.from(this._formElement.querySelectorAll(this._inputSelector));e.forEach((t=>{this._checkInputValidity(t),this._toggleButtonState(e)}))}enableValidation(){this._setEventListeners()}disableSubmit(){this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.setAttribute("disabled",!0)}resetForm(){this._formElement.reset()}}class r{constructor(e){this._popupElement=document.querySelector(e)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keyup",this._handleEscClose)}close=()=>{this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keyup",this._handleEscClose)};_handleEscClose=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._closeButton=this._popupElement.querySelector(".modal__close"),this._closeButton.addEventListener("click",this.close),this._popupElement.addEventListener("mousedown",(e=>{e.target===e.currentTarget&&this.close()}))}}class s extends r{constructor(e,t,r){let{formSelector:s}=r;super(e),this._form=this._popupElement.querySelector(s),this._button=this._form.querySelector(".modal__button"),this._originalButtonText=this._button.textContent,this._formSubmit=t,this._inputList=Array.from(this._form.querySelectorAll(".modal__input"))}_getInputValues(){const e={};return this._inputList.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){this._form.addEventListener("submit",(e=>{e.preventDefault();const t=this._getInputValues();this._formSubmit(t)})),super.setEventListeners()}renderSaving(e){this._button.textContent=e?"Saving...":this._originalButtonText}}const i={inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_active",formSelector:".modal__form"},n=document.querySelector(".profile"),o=n.querySelector("#profile-edit-button"),l=n.querySelector(".profile__add-button"),a=n.querySelector(".profile__image-button"),c=document.querySelector("#profile-edit-modal"),d=(Array.from(c.querySelectorAll(".modal__input")),Array.from(document.querySelectorAll(i.formSelector))),h={},_=new class{constructor(e){let{titleSelector:t,descriptionSelector:r,avatarSelector:s}=e;this._titleElement=document.querySelector(t),this._descriptionElement=document.querySelector(r),this._avatarElement=document.querySelector(s)}getUserInfo(){const e={};return e.title=this._titleElement.textContent,e.description=this._descriptionElement.textContent,e}setUserInfo(e){this._titleElement.textContent=e.title,this._descriptionElement.textContent=e.description}setUserAvatar(e){this._avatarElement.setAttribute("src",e)}}({titleSelector:".profile__title",descriptionSelector:".profile__description",avatarSelector:".profile__image"}),u=new class extends r{constructor(e,t){let{submitButtonSelector:r}=t;super(e),this._form=this._popupElement.querySelector(".modal__form"),this._button=this._popupElement.querySelector(r),this._originalButtonText=this._button.textContent}renderSaving(e){this._button.textContent=e?"Saving...":this._originalButtonText}setCallback(e){this._callback=e}setEventListeners(){this._form.addEventListener("submit",(e=>{e.preventDefault(),this._callback()})),super.setEventListeners()}}("#modal-confirm-delete",i),m=new s("#modal-change-profile",(function(e){m.renderSaving(!0),p.updateAvatar(e).then((e=>{_.setUserAvatar(e.avatar),m.close()})).catch(console.error).finally((()=>{m.renderSaving(!1)}))}),i),p=new class{constructor(e){let{baseUrl:t,headers:r}=e;this._baseUrl=t,this._headers=r}renderResult(e){return e.ok?e.json():Promise.reject(`Error :${e.status}`)}async getUserInfo(){const e=await fetch(`${this._baseUrl}/users/me`,{headers:this._headers});return this.renderResult(e)}async getInitialCards(){const e=await fetch(`${this._baseUrl}/cards`,{headers:this._headers});return this.renderResult(e)}async editProfile(e){let{title:t,description:r}=e;const s=await fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:r})});return this.renderResult(s)}async addCard(e){let{name:t,link:r}=e;const s=await fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:r})});return this.renderResult(s)}async deleteCard(e){const t=await fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers});return this.renderResult(t)}likeCard(e,t){return this._request(`${this._baseUrl}/cards/${e}/likes`,{method:t?"DELETE":"PUT",headers:this._headers})}async updateAvatar(e){let{link:t}=e;const r=await fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t})});return this.renderResult(r)}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"03277265-2976-4ddf-957d-4d187bc8c844","Content-Type":"application/json"}});p.getUserInfo().then((e=>{_.setUserInfo({name:e.name,description:e.about}),_.setUserAvatar(e.avatar)})).catch(console.error);const E=new class{constructor(e,t){let{renderer:r}=e;this._renderer=r,this._container=document.querySelector(t)}rendererItems=e=>{e.reverse().forEach((e=>{this.addItem(this._renderer(e))}))};addItem=e=>{this._container.prepend(e)}}({items:[],renderer:g},".cards__list");p.getInitialCards().then((e=>{E.rendererItems(e)})).catch(console.error);const v=new class extends r{constructor(e){super(e),this._previewImage=this._popupElement.querySelector(".modal__image"),this._previewImageTitle=this._popupElement.querySelector(".modal__image-title")}open(e){let{name:t,link:r}=e;console.log(t,r),this._previewImage.src=r,this._previewImage.alt=t,this._previewImageTitle.textContent=t,super.open()}}("#image-preview-modal"),S=new s("#profile-edit-modal",(function(e){S.renderSaving(!0),p.editProfile(e).then((e=>{_.setUserInfo({title:e.name,description:e.about}),S.close()})).catch(console.error).finally((()=>{S.renderSaving(!1)}))}),i);function f(e){u.open(),u.setCallback((()=>{u.renderSaving(!0),p.deleteCard(e.getId()).then((()=>{e.deleteCard(),u.close()})).catch(console.error).finally((()=>{u.renderSaving(!1)}))}))}const b=new s("#profile-add-modal",(function(e){b.renderSaving(!0),p.addCard(e).then((e=>{const t=g(e);E.addItem(t),h.addCardForm.resetForm(),h.addCardForm.disableSubmit(),b.close()})).catch(console.error).finally((()=>{b.renderSaving(!1)}))}),i);function g(t){return new e(t,"#card",y,f).generateCard()}function y(e,t){v.open({name:e,link:t})}d.forEach((e=>{const r=new t(e,i),s=e.getAttribute("name");r.enableValidation(),h[s]=r})),o.addEventListener("click",(()=>{_.getUserInfo(),h.profileForm.checkValidity(),S.open()})),l.addEventListener("click",(()=>b.open())),S.setEventListeners(),b.setEventListeners(),v.setEventListeners(),a.addEventListener("click",(()=>m.open())),m.setEventListeners(),u.setEventListeners()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFpQkksRUFBTUUsR0FDOUJ5SyxFQUFhdkcsS0FBSyxDQUFFcEUsT0FBTUUsUUFDNUIsQ0FuQ0FvRyxFQUFTMUMsU0FBUzJILElBQ2hCLE1BQU1DLEVBQVksSUFBSTlKLEVBQWM2SixFQUFNdkYsR0FDcEN5RixFQUFXRixFQUFLRyxhQUFhLFFBQ25DRixFQUFVMUgsbUJBQ1Z5QyxFQUFla0YsR0FBWUQsQ0FBUyxJQXlDdEN0RixFQUFrQnBGLGlCQUFpQixTQUFTLEtBQ3pCMEYsRUFBU08sY0FDMUJSLEVBQWVvRixZQUFZOUgsZ0JBQzNCb0gsRUFBaUI3RyxNQUFNLElBSXpCK0IsRUFBaUJyRixpQkFBaUIsU0FBUyxJQUFNcUssRUFBYS9HLFNBRzlENkcsRUFBaUJ2RyxvQkFHakJ5RyxFQUFhekcsb0JBR2JpRyxFQUFhakcsb0JBR2IwQixFQUFnQnRGLGlCQUFpQixTQUFTLElBQU0yRyxFQUFnQnJELFNBR2hFcUQsRUFBZ0IvQyxvQkFHaEIyQyxFQUF3QjNDLG1CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3V0aWxzL0NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gIC8vKioqLkNBUkQgQ09OU1RSVUNUT1IqKipcclxuICBjb25zdHJ1Y3RvcihkYXRhLCBjYXJkU2VsZWN0b3IsIGhhbmRsZUltYWdlQ2xpY2ssIGhhbmRsZURlbGV0ZUNsaWNrKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcclxuICAgIHRoaXMuX2lkID0gZGF0YS5faWQ7XHJcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XHJcbiAgICB0aGlzLmhhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xyXG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sgPSBoYW5kbGVEZWxldGVDbGljaztcclxuICB9XHJcblxyXG4gIC8vKioqR0VUIFRFTVBMQVRFKioqXHJcbiAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG5cclxuICAgIHJldHVybiBjYXJkRWxlbWVudDtcclxuICB9XHJcbiAgLy8qKipHRVQgVEhFIENBUkQgRUxFTUVOVCBPVVQgT0YgVEhFIFRFTVBMQVRFKioqXHJcbiAgZ2V0SWQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faWQ7XHJcbiAgfVxyXG5cclxuICAvLyoqKkFERCBDQVJEUyBFVkVOVCBMSVNURU5FUlMqKipcclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAvLyoqKkNMSUNLIENBUkQgRVZFTlQgTElTVEVORVIqKipcclxuICAgIHRoaXMuX2ltYWdlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLmhhbmRsZUltYWdlQ2xpY2sodGhpcy5fbmFtZSwgdGhpcy5fbGluayk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyoqKkNMSUNLIExJS0UgRVZFTlQgTElTVEVORVIqKipcclxuICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5fbGlrZUNhcmQoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vKioqIENMSUNLIERFTEVURSBFVkVOVCBMSVNURU5FUioqKlxyXG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrKHRoaXMpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLyoqKiBIQU5ETEUgREVMRVRFIEVWRU5UIExJU1RFTkVSKioqXHJcbiAgZGVsZXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcclxuICB9XHJcblxyXG4gIC8vKioqSEFORExFIENMSUNLIExJS0UgRVZFTlQgTElTVEVORVIqKipcclxuICBfbGlrZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgfVxyXG5cclxuICAvLy8qKipQT1BVTEFURSBDQVJEICoqKlxyXG4gIGdlbmVyYXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgdGhpcy5faW1hZ2VFbGVtZW50ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcclxuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZWxldGUtYnV0dG9uXCIpO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICB0aGlzLl9pbWFnZUVsZW1lbnQuc2V0QXR0cmlidXRlKFwic3JjXCIsIHRoaXMuX2xpbmspO1xyXG4gICAgdGhpcy5faW1hZ2VFbGVtZW50LnNldEF0dHJpYnV0ZShcImFsdFwiLCB0aGlzLl9uYW1lKTtcclxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIC8vKioqRk9STSBWQUxJREFUT1IgQ09OU1RSVUNUT1IqKipcclxuICBjb25zdHJ1Y3RvcihcclxuICAgIGZvcm1FbGVtZW50LFxyXG4gICAge1xyXG4gICAgICBpbnB1dFNlbGVjdG9yLFxyXG4gICAgICBzdWJtaXRCdXR0b25TZWxlY3RvcixcclxuICAgICAgaW5hY3RpdmVCdXR0b25DbGFzcyxcclxuICAgICAgaW5wdXRFcnJvckNsYXNzLFxyXG4gICAgICBlcnJvckNsYXNzLFxyXG4gICAgfVxyXG4gICkge1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcclxuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBpbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBpbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IGVycm9yQ2xhc3M7XHJcbiAgfVxyXG5cclxuICAvLyoqKlNIT1dJTkcgSU5QVVQgRVJST1IqKipcclxuICBfc2hvd0lucHV0RXJyb3IgPSAoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgdGhpcy5fZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gICAgdGhpcy5fZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfTtcclxuXHJcbiAgLy8qKipISURJTUcgSU5QVVQgRVJST1IqKipcclxuICBfaGlkZUlucHV0RXJyb3IgPSAoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgdGhpcy5fZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgICB0aGlzLl9lcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gIH07XHJcblxyXG4gIC8vKioqQ0hFQ0tJTkcgRUxFTUVOVFMgVkFMSURJVFkqKipcclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5ID0gKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgdGhpcy5fZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLy8qKipDSEVDS0lORyBJTlBVVCBFTEVNRU5UUyBWQUxJRElUWSoqKlxyXG4gIF9oYXNJbnZhbGlkSW5wdXQgPSAoaW5wdXRMaXN0KSA9PiB7XHJcbiAgICByZXR1cm4gaW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIC8vLSoqKlRPR0dMSU5HIFNVQk1JVCBCVVRUT04qKipcclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUgPSAoaW5wdXRMaXN0KSA9PiB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkpIHtcclxuICAgICAgdGhpcy5kaXNhYmxlU3VibWl0KCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIik7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLy8qKipTRVQgRVZFTlQgTElTVEVORVJTKioqXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcclxuICAgICAgdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKVxyXG4gICAgKTtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvclxyXG4gICAgKTtcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCk7XHJcbiAgICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLyoqKkNIRUNLIFZBTElESVRZKioqXHJcbiAgY2hlY2tWYWxpZGl0eSgpIHtcclxuICAgIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20oXHJcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcilcclxuICAgICk7XHJcbiAgICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLyoqKk1FVEhPRCBUTyBFTkFCTEUgVkFMSURBVElPTioqKlxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxuXHJcbiAgLy8qKipESVNBQkxFIFNVQk1JVCBCVVRUT04qKipcclxuICBkaXNhYmxlU3VibWl0KCkge1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCB0cnVlKTtcclxuICB9XHJcblxyXG4gIC8vKioqUkVTRVQgVEhFIEZPUk0qKipcclxuICByZXNldEZvcm0oKSB7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5yZXNldCgpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBNb2RhbCB7XHJcbiAgLy8qKipNT0RBTCBDT05TVFJVQ1RPUioqKlxyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICAvLyoqKklUVEVSQVRFIE9WRVIgVEhFIElURU1TIEFSUkFZICYgUkVOREVSUyBJVEVNKioqXHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIC8vKioqQUREIERPTSBFTEVNRU5UICBUTyBUSEUgQ09OVEFJTkVSKioqXHJcbiAgY2xvc2UgPSAoKSA9PiB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfTtcclxuXHJcbiAgLy8qKipDTE9TRSBNT0RBTCBXSVRIIEVTQ0FQRSoqKlxyXG4gIF9oYW5kbGVFc2NDbG9zZSA9IChldnQpID0+IHtcclxuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvLyoqKkFERCBDTElDSyBFVkVOVCBMSVNURU5FUiBUTyBUSEUgQ0xPU0UgQlVUVE9OKioqXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9jbG9zZUJ1dHRvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZVwiKTtcclxuICAgIHRoaXMuX2Nsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmNsb3NlKTtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChldnQpID0+IHtcclxuICAgICAgaWYgKGV2dC50YXJnZXQgPT09IGV2dC5jdXJyZW50VGFyZ2V0KSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIC8vKioqUE9QVVBXSVRIRk9STSBDT05TVFJVQ1RPUioqKlxyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGZvcm1TdWJtaXQsIHsgZm9ybVNlbGVjdG9yIH0pIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKGZvcm1TZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9idXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2J1dHRvblwiKTtcclxuICAgIHRoaXMuX29yaWdpbmFsQnV0dG9uVGV4dCA9IHRoaXMuX2J1dHRvbi50ZXh0Q29udGVudDtcclxuICAgIHRoaXMuX2Zvcm1TdWJtaXQgPSBmb3JtU3VibWl0O1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2lucHV0XCIpKTtcclxuICB9XHJcblxyXG4gIC8vKioqQ09MTEVDVElORyBUSEUgSU5QVVQgVkFMVUVTKioqXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7fTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBpbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gaW5wdXRWYWx1ZXM7XHJcbiAgfVxyXG4gIC8vKioqQURESU5HIEZVTkNUSU9OQUxJVFkgVE8gVEhFIFNFVEVWRU5UTElTVEVORVJTIE1FVEhPRCoqXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgY29uc3QgdmFsdWVzID0gdGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKTtcclxuICAgICAgdGhpcy5fZm9ybVN1Ym1pdCh2YWx1ZXMpO1xyXG4gICAgfSk7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxuICAvLyoqKkNIQU5HRSBCVVRUT04gVEVYVCoqKlxyXG4gIHJlbmRlclNhdmluZyhpc1NhdmluZykge1xyXG4gICAgaXNTYXZpbmdcclxuICAgICAgPyAodGhpcy5fYnV0dG9uLnRleHRDb250ZW50ID0gXCJTYXZpbmcuLi5cIilcclxuICAgICAgOiAodGhpcy5fYnV0dG9uLnRleHRDb250ZW50ID0gdGhpcy5fb3JpZ2luYWxCdXR0b25UZXh0KTtcclxuICB9XHJcbn1cclxuIiwiLy8qKipPQkpFQ1QgV0lUSCBJTklUSUFMIENBUkRTKioqXHJcbmV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC95b3NlbWl0ZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWtlLWxvdWlzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9iYWxkLW1vdW50YWlucy5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhdGVtYXIuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhcyBWZWdhc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3d3dy52aXNpdHRoZXVzYS5jb20vc2l0ZXMvZGVmYXVsdC9maWxlcy9zdHlsZXMvMTZfOV8xMjgweDcyMC9wdWJsaWMvMjAyMy0wNi83YjA1ZTAzMS0yZDgwLTRkMGEtYmJkNS05YzI4YTdlZjhkOGUuanBlZz9oPTJjZTg5YTVjJml0b2s9b3c5akxNdHlcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTWVydHlsIEJlYWNoXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vd3d3Lm1vbnRlcmV5YmF5c3VpdGVzLmNvbS93cC1jb250ZW50L3VwbG9hZHMvMjAyMy8wMS9teXJ0bGUtYmVhY2gtc2hvcmVsaW5lLTExODQ3MzUxNjguanBnXCIsXHJcbiAgfSxcclxuXTtcclxuXHJcbi8vKioqQ09ORklHIFNFVFRJTkdTKioqXHJcbmV4cG9ydCBjb25zdCBjb25maWcgPSB7XHJcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19idXR0b25cIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl9hY3RpdmVcIixcclxuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXHJcbn07XHJcblxyXG4vLyoqKkJVVFRPTiBQUk9GSUxFIEVMRU1FTlRTKioqXHJcbmNvbnN0IHByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVcIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IHByb2ZpbGUucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtYnV0dG9uXCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUFkZEJ1dHRvbiA9IHByb2ZpbGUucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xyXG5leHBvcnQgY29uc3QgZWRpdEltYWdlQnV0dG9uID0gcHJvZmlsZS5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2ltYWdlLWJ1dHRvblwiKTtcclxuXHJcbi8vKioqREVGSU5JTkcgQU4gQVJSQVkgT0YgQUxMIFBST0ZJTEUgRURJVCBJTlBVVFMqKipcclxuY29uc3QgcHJvZmlsZUVkaXRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LW1vZGFsXCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUlucHV0TGlzdCA9IEFycmF5LmZyb20oXHJcbiAgcHJvZmlsZUVkaXRNb2RhbC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19pbnB1dFwiKVxyXG4pO1xyXG5cclxuLy8qKipBUlJBWSBGT1IgQUxMIEZPUk0gRUxFTUVOVFMqKipcclxuZXhwb3J0IGNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShcclxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5mb3JtU2VsZWN0b3IpXHJcbik7XHJcblxyXG4vLyoqKkVNUFRZIE9CSkVDVCBGT1IgQUxMIFRIRSBGT1JNUyoqKlxyXG5leHBvcnQgY29uc3QgZm9ybVZhbGlkYXRvcnMgPSB7fTtcclxuIiwiLy8qKipJTVBPUlQgU0VUVElOR1MqKipcclxuaW1wb3J0IFwiLi4vcGFnZXMvaW5kZXguY3NzXCI7XHJcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtYXRpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzXCI7XHJcbmltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpLmpzXCI7XHJcblxyXG5pbXBvcnQge1xyXG4gIGluaXRpYWxDYXJkcyxcclxuICBjb25maWcsXHJcbiAgcHJvZmlsZUVkaXRCdXR0b24sXHJcbiAgcHJvZmlsZUFkZEJ1dHRvbixcclxuICBwcm9maWxlSW5wdXRMaXN0LFxyXG4gIGVkaXRJbWFnZUJ1dHRvbixcclxuICBmb3JtTGlzdCxcclxuICBmb3JtVmFsaWRhdG9ycyxcclxufSBmcm9tIFwiLi4vdXRpbHMvQ29uc3RhbnRzLmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5cclxuLy8qKiogTkVXIFVTRVIgSU5GTyoqKlxyXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XHJcbiAgdGl0bGVTZWxlY3RvcjogXCIucHJvZmlsZV9fdGl0bGVcIixcclxuICBkZXNjcmlwdGlvblNlbGVjdG9yOiBcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiLFxyXG4gIGF2YXRhclNlbGVjdG9yOiBcIi5wcm9maWxlX19pbWFnZVwiLFxyXG59KTtcclxuXHJcbi8vKioqQ0FSRCBERUxFVEUgQ09ORklSTUFUSU9OKioqXHJcbmNvbnN0IGRlbGV0ZUNvbmZpcm1hdGlvblBvcHVwID0gbmV3IFBvcHVwV2l0aENvbmZpcm1hdGlvbihcclxuICBcIiNtb2RhbC1jb25maXJtLWRlbGV0ZVwiLFxyXG4gIGNvbmZpZ1xyXG4pO1xyXG5cclxuLy8qKipDSEFOR0UgUFJPRklMRSBJTUFHRSoqKlxyXG5jb25zdCBhdmF0YXJFZGl0UG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBcIiNtb2RhbC1jaGFuZ2UtcHJvZmlsZVwiLFxyXG4gIGhhbmRsZUF2YXRhckZvcm1TdWJtaXQsXHJcbiAgY29uZmlnXHJcbik7XHJcblxyXG4vLyoqKk5FVyBBUEkqKipcclxuY29uc3QgYXBpID0gbmV3IEFwaSh7XHJcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MVwiLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246IFwiMDMyNzcyNjUtMjk3Ni00ZGRmLTk1N2QtNGQxODdiYzhjODQ0XCIsXHJcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICB9LFxyXG59KTtcclxuLy8qKipVU0VSIElORk9STUFUSU9OIEZST00gVEhFIEFQSSoqKlxyXG5hcGlcclxuICAuZ2V0VXNlckluZm8oKVxyXG4gIC50aGVuKChyZXMpID0+IHtcclxuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHtcclxuICAgICAgbmFtZTogcmVzLm5hbWUsXHJcbiAgICAgIGRlc2NyaXB0aW9uOiByZXMuYWJvdXQsXHJcbiAgICB9KTtcclxuICAgIHVzZXJJbmZvLnNldFVzZXJBdmF0YXIocmVzLmF2YXRhcik7XHJcbiAgfSlcclxuICAuY2F0Y2goY29uc29sZS5lcnJvcik7XHJcblxyXG5jb25zdCBjYXJkc0NvbnRhaW5lciA9IG5ldyBTZWN0aW9uKFxyXG4gIHsgaXRlbXM6IFtdLCByZW5kZXJlcjogcmVuZGVyQ2FyZCB9LFxyXG4gIFwiLmNhcmRzX19saXN0XCJcclxuKTtcclxuLy8qKiogSU5JVElBTCBDQVJEUyBGUk9NIFRIRSBBUEkqKipcclxuYXBpXHJcbiAgLmdldEluaXRpYWxDYXJkcygpXHJcbiAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgLy8qKipSRU5ERVJFUiBNRVRIT0QgT04gQ0FSRFNDT05UQUlORVIqKipcclxuXHJcbiAgICBjYXJkc0NvbnRhaW5lci5yZW5kZXJlckl0ZW1zKHJlcyk7XHJcbiAgfSlcclxuICAuY2F0Y2goY29uc29sZS5lcnJvcik7XHJcblxyXG4vLyoqKlBSRVZJRVcgSU1BR0UqKipcclxuY29uc3QgcHJldmlld1BvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI2ltYWdlLXByZXZpZXctbW9kYWxcIik7XHJcblxyXG4vLyoqKlBPUFVQV0lUSEZPUk0qKipcclxuY29uc3QgcHJvZmlsZUVkaXRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiLFxyXG4gIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0LFxyXG4gIGNvbmZpZ1xyXG4pO1xyXG4vKi8qKipGVU5DVElPTiBIQU5ETElORyBERUxFVEUgU1VCTUlUKioqXHJcbmZ1bmN0aW9uIGhhbmRsZURlbGV0ZUZvcm1TdWJtaXQodmFsdWVzKSB7XHJcbiAgZGVsZXRlQ29uZmlybWF0aW9uUG9wdXAucmVuZGVyU2F2aW5nKHRydWUpO1xyXG4gIGFwaVxyXG4gICAgLmRlbGV0ZUNhcmQodmFsdWVzKVxyXG4gICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBjb25zdCBkZWxldGVDYXJkID0gcmVuZGVyQ2FyZChyZXMpO1xyXG4gICAgICBjYXJkc0NvbnRhaW5lci5kZWxldGVJdGVtKGRlbGV0ZUNhcmQpO1xyXG4gICAgICBmb3JtVmFsaWRhdG9ycy5kZWxldGVGb3JtLnJlc2V0Rm9ybSgpO1xyXG4gICAgICBkZWxldGVDb25maXJtYXRpb25Qb3B1cC5jbG9zZSgpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaChjb25zb2xlLmVycm9yKVxyXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICBkZWxldGVDb25maXJtYXRpb25Qb3B1cC5yZW5kZXJTYXZpbmcoZmFsc2UpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbiovXHJcblxyXG4vLyoqKkZVTkNUSU9OIEhBTkRMSU5HIERFTEVURSBDTElDSyoqKlxyXG5mdW5jdGlvbiBoYW5kbGVEZWxldGVDbGljayhjYXJkKSB7XHJcbiAgLy9jb25zb2xlLmxvZyhjYXJkKTtcclxuICBkZWxldGVDb25maXJtYXRpb25Qb3B1cC5vcGVuKCk7XHJcbiAgZGVsZXRlQ29uZmlybWF0aW9uUG9wdXAuc2V0Q2FsbGJhY2soKCkgPT4ge1xyXG4gICAgZGVsZXRlQ29uZmlybWF0aW9uUG9wdXAucmVuZGVyU2F2aW5nKHRydWUpO1xyXG4gICAgYXBpXHJcbiAgICAgIC5kZWxldGVDYXJkKGNhcmQuZ2V0SWQoKSlcclxuICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIGNhcmQuZGVsZXRlQ2FyZCgpO1xyXG4gICAgICAgIGRlbGV0ZUNvbmZpcm1hdGlvblBvcHVwLmNsb3NlKCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaChjb25zb2xlLmVycm9yKVxyXG4gICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgZGVsZXRlQ29uZmlybWF0aW9uUG9wdXAucmVuZGVyU2F2aW5nKGZhbHNlKTtcclxuICAgICAgfSk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbi8vKioqRlVOQ1RJT04gSEFORExJTkcgTElLRSBDTElDSyoqKlxyXG5mdW5jdGlvbiBoYW5kbGVMaWtlQ2xpY2soY2FyZCkge1xyXG4gIGFwaVxyXG4gICAgLmxpa2VDYXJkKGNhcmQuZ2V0SWQoKSwgY2FyZC5pc0xpa2VkKVxyXG4gICAgLnRoZW4oKHJlcykgPT4gY2FyZC50b2dnbGVMaWtlQ2FyZChyZXMuaXNMaWtlZCkpXHJcbiAgICAuY2F0Y2goY29uc29sZS5lcnJvcik7XHJcbn1cclxuXHJcbi8vKioqRlVOQ1RJT04gSEFORExJTkcgQVZBVEFSIEVESVQgU1VCTUlUKioqXHJcbmZ1bmN0aW9uIGhhbmRsZUF2YXRhckZvcm1TdWJtaXQodmFsdWVzKSB7XHJcbiAgYXZhdGFyRWRpdFBvcHVwLnJlbmRlclNhdmluZyh0cnVlKTtcclxuICBhcGlcclxuICAgIC51cGRhdGVBdmF0YXIodmFsdWVzKVxyXG4gICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICB1c2VySW5mby5zZXRVc2VyQXZhdGFyKHJlcy5hdmF0YXIpO1xyXG4gICAgICBhdmF0YXJFZGl0UG9wdXAuY2xvc2UoKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goY29uc29sZS5lcnJvcilcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgYXZhdGFyRWRpdFBvcHVwLnJlbmRlclNhdmluZyhmYWxzZSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuLy8qKipGVU5DVElPTiBIQU5ETElORyBQUk9GSUxFIEVESVQgU1VCTUlUKioqXHJcbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KHZhbHVlcykge1xyXG4gIHByb2ZpbGVFZGl0UG9wdXAucmVuZGVyU2F2aW5nKHRydWUpO1xyXG4gIGFwaVxyXG4gICAgLmVkaXRQcm9maWxlKHZhbHVlcylcclxuICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgdXNlckluZm8uc2V0VXNlckluZm8oe1xyXG4gICAgICAgIHRpdGxlOiByZXMubmFtZSxcclxuICAgICAgICBkZXNjcmlwdGlvbjogcmVzLmFib3V0LFxyXG4gICAgICB9KTtcclxuICAgICAgcHJvZmlsZUVkaXRQb3B1cC5jbG9zZSgpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaChjb25zb2xlLmVycm9yKVxyXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICBwcm9maWxlRWRpdFBvcHVwLnJlbmRlclNhdmluZyhmYWxzZSk7XHJcbiAgICB9KTtcclxufVxyXG4vLyoqKlBPUFVQV0lUSEZPUk1JTUFHRSoqKlxyXG5jb25zdCBhZGRDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBcIiNwcm9maWxlLWFkZC1tb2RhbFwiLFxyXG4gIGhhbmRsZUFkZEltYWdlRm9ybVN1Ym1pdCxcclxuICBjb25maWdcclxuKTtcclxuXHJcbi8vKioqRlVOQ1RJT04gQUREIElNQUdFIFNVQk1JVCoqKlxyXG5mdW5jdGlvbiBoYW5kbGVBZGRJbWFnZUZvcm1TdWJtaXQodmFsdWVzKSB7XHJcbiAgYWRkQ2FyZFBvcHVwLnJlbmRlclNhdmluZyh0cnVlKTtcclxuICBhcGlcclxuICAgIC5hZGRDYXJkKHZhbHVlcylcclxuICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgY29uc3QgbmV3Q2FyZCA9IHJlbmRlckNhcmQocmVzKTtcclxuICAgICAgY2FyZHNDb250YWluZXIuYWRkSXRlbShuZXdDYXJkKTtcclxuICAgICAgZm9ybVZhbGlkYXRvcnMuYWRkQ2FyZEZvcm0ucmVzZXRGb3JtKCk7XHJcbiAgICAgIGZvcm1WYWxpZGF0b3JzLmFkZENhcmRGb3JtLmRpc2FibGVTdWJtaXQoKTtcclxuICAgICAgYWRkQ2FyZFBvcHVwLmNsb3NlKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIGFkZENhcmRQb3B1cC5yZW5kZXJTYXZpbmcoZmFsc2UpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8vKioqRk9STSBWQUxJREFUT1IgQ1JFQVRPUioqKlxyXG5mb3JtTGlzdC5mb3JFYWNoKChmb3JtKSA9PiB7XHJcbiAgY29uc3QgdmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybSwgY29uZmlnKTtcclxuICBjb25zdCBmb3JtTmFtZSA9IGZvcm0uZ2V0QXR0cmlidXRlKFwibmFtZVwiKTtcclxuICB2YWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG4gIGZvcm1WYWxpZGF0b3JzW2Zvcm1OYW1lXSA9IHZhbGlkYXRvcjtcclxufSk7XHJcblxyXG4vLyoqKlJFTkRFUiBDQVJEIEZVTkNUSU9OKioqXHJcbmZ1bmN0aW9uIHJlbmRlckNhcmQoY2FyZERhdGEpIHtcclxuICAvLyBjb25zb2xlLmxvZyhjYXJkRGF0YSk7XHJcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGNhcmREYXRhLCBcIiNjYXJkXCIsIGhhbmRsZUltYWdlQ2xpY2ssIGhhbmRsZURlbGV0ZUNsaWNrKTtcclxuICByZXR1cm4gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcclxufVxyXG5cclxuLyovKioqTkVXIFNFQ1RJT04qKipcclxuY29uc3QgY2FyZHNDb250YWluZXIgPSBuZXcgU2VjdGlvbihcclxuICB7IGl0ZW1zOiBpbml0aWFsQ2FyZHMsIHJlbmRlcmVyOiByZW5kZXJDYXJkIH0sXHJcbiAgXCIuY2FyZHNfX2xpc3RcIlxyXG4pOyovXHJcblxyXG4vLyoqKlJFTkRFUiBDQVJEU0NPTlRBSU5FUioqKlxyXG4vL2NhcmRzQ29udGFpbmVyLnJlbmRlcmVySXRlbXMoKTtcclxuXHJcbi8qICoqQUREIElNQUdFIFNVQk1JVCoqKlxyXG5mdW5jdGlvbiBoYW5kbGVBZGRJbWFnZUZvcm1TdWJtaXQodmFsdWVzKSB7XHJcbiAgY29uc3QgbmV3Q2FyZCA9IHJlbmRlckNhcmQodmFsdWVzKTtcclxuICBjYXJkc0NvbnRhaW5lci5hZGRJdGVtKG5ld0NhcmQpO1xyXG4gIGZvcm1WYWxpZGF0b3JzLmFkZENhcmRGb3JtLnJlc2V0Rm9ybSgpO1xyXG4gIGZvcm1WYWxpZGF0b3JzLmFkZENhcmRGb3JtLmRpc2FibGVTdWJtaXQoKTtcclxuICBhZGRDYXJkRm9ybS5jbG9zZSgpO1xyXG59Ki9cclxuXHJcbi8vKioqUE9QVUxBVEUgUFJFVklFVyBQT1BVUCoqKlxyXG5mdW5jdGlvbiBoYW5kbGVJbWFnZUNsaWNrKG5hbWUsIGxpbmspIHtcclxuICBwcmV2aWV3UG9wdXAub3Blbih7IG5hbWUsIGxpbmsgfSk7XHJcbn1cclxuXHJcbi8qLyoqKiBGSUxMIElOUFVUUyBPRiBQUk9GSUxFIEVESVQgUE9QVVAgKioqXHJcbmZ1bmN0aW9uIGZpbGxQcm9maWxlSW5wdXRzKCkge1xyXG4gIGNvbnN0IHVzZXJDdXJyZW50SW5mbyA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcbiAgcHJvZmlsZUlucHV0TGlzdFswXS52YWx1ZSA9IHVzZXJDdXJyZW50SW5mby50aXRsZTtcclxuICBwcm9maWxlSW5wdXRMaXN0WzFdLnZhbHVlID0gdXNlckN1cnJlbnRJbmZvLmRlc2NyaXB0aW9uO1xyXG59Ki9cclxuXHJcbi8vKioqICBDTElDSyBFVkVOVCBMSVNURU5FUiBGT1IgVEhFIEVESVQgQlVUVE9OKioqXHJcbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgY29uc3QgdXNlckRhdGEgPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG4gIGZvcm1WYWxpZGF0b3JzLnByb2ZpbGVGb3JtLmNoZWNrVmFsaWRpdHkoKTtcclxuICBwcm9maWxlRWRpdFBvcHVwLm9wZW4oKTtcclxufSk7XHJcblxyXG4vLyoqKkNMSUNLIEVWRU5UIExJU1RFTkVSIEZPUiBUSEUgQUREIEJVVFRPTioqKlxyXG5wcm9maWxlQWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBhZGRDYXJkUG9wdXAub3BlbigpKTtcclxuXHJcbi8vKioqIEVWRU5UIExJU1RFTkVSUyBGT1IgVEhFIEVESVQgUFJPRklMRSBNT0RBTCoqKlxyXG5wcm9maWxlRWRpdFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vLyoqKkVWRU5UIExJU1RFTkVSUyBUTyBUSEUgQUREIElNQUdFKioqXHJcbmFkZENhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy8gKioqIEVWRU5UIExJU1RFTkVSUyBGT1IgVEhFIFBSRVZJRVcgSU1BR0UgTU9EQUwqKioqXHJcbnByZXZpZXdQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy8qKipBREQgQSBDTElDSyBFVkVOVCBMSVNURU5FUiBUTyBUSEUgRURJVCBQSUNUVVJFIEJVVFRPTioqKlxyXG5lZGl0SW1hZ2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IGF2YXRhckVkaXRQb3B1cC5vcGVuKCkpO1xyXG5cclxuLy8qKipBREQgRVZFTlQgTElTVEVORVJTIFRPIFRIRSBDSEFOR0UgUElDVFVSRSBNT0RBTCoqKlxyXG5hdmF0YXJFZGl0UG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8vKioqQUREIEVWRU5UIExJU1RFTkVSUyBUTyBUSEUgREVMRVRFIENPTkZJUk1BVElPTiBNT0RBTCoqKlxyXG5kZWxldGVDb25maXJtYXRpb25Qb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgLy8qKipVU0VSSU5GTyBDT05TVFJVQ1RPUioqKlxyXG4gIGNvbnN0cnVjdG9yKHsgdGl0bGVTZWxlY3RvciwgZGVzY3JpcHRpb25TZWxlY3RvciwgYXZhdGFyU2VsZWN0b3IgfSkge1xyXG4gICAgdGhpcy5fdGl0bGVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aXRsZVNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2Rlc2NyaXB0aW9uRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZGVzY3JpcHRpb25TZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9hdmF0YXJFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhdmF0YXJTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICAvLyoqKlJFVFVSTiBPQkpFQ1QgVVNFUklORk8qKipcclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIGNvbnN0IHVzZXJDdXJyZW50SW5mbyA9IHt9O1xyXG4gICAgdXNlckN1cnJlbnRJbmZvLnRpdGxlID0gdGhpcy5fdGl0bGVFbGVtZW50LnRleHRDb250ZW50O1xyXG4gICAgdXNlckN1cnJlbnRJbmZvLmRlc2NyaXB0aW9uID0gdGhpcy5fZGVzY3JpcHRpb25FbGVtZW50LnRleHRDb250ZW50O1xyXG4gICAgcmV0dXJuIHVzZXJDdXJyZW50SW5mbztcclxuICB9XHJcblxyXG4gIC8vKioqU0VUIFRIRSBVU0VSIElORk8gSU4gVEhFIFBST0ZJTEUqKipcclxuICBzZXRVc2VySW5mbyhkYXRhKSB7XHJcbiAgICB0aGlzLl90aXRsZUVsZW1lbnQudGV4dENvbnRlbnQgPSBkYXRhLnRpdGxlO1xyXG4gICAgdGhpcy5fZGVzY3JpcHRpb25FbGVtZW50LnRleHRDb250ZW50ID0gZGF0YS5kZXNjcmlwdGlvbjtcclxuICB9XHJcblxyXG4gIC8vKioqU0VUIFRIRSBVU0VSIEFWQVRBUiBJTiBUSEUgUFJPRklMRSoqKlxyXG4gIHNldFVzZXJBdmF0YXIobGluaykge1xyXG4gICAgdGhpcy5fYXZhdGFyRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgbGluayk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGV4dGVuZHMgUG9wdXAge1xyXG4gIC8vKioqUE9QVVBXSVRIQ09ORklSTUFUSU9OIENPTlNUUlVDVE9SKioqXHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgeyBzdWJtaXRCdXR0b25TZWxlY3RvciB9KSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcclxuXHJcbiAgICB0aGlzLl9idXR0b24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihzdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9vcmlnaW5hbEJ1dHRvblRleHQgPSB0aGlzLl9idXR0b24udGV4dENvbnRlbnQ7XHJcbiAgfVxyXG5cclxuICAvLyoqKkNIQU5HRSBCVVRUT04gVEVYVCoqKlxyXG4gIHJlbmRlclNhdmluZyhpc1NhdmluZykge1xyXG4gICAgaXNTYXZpbmdcclxuICAgICAgPyAodGhpcy5fYnV0dG9uLnRleHRDb250ZW50ID0gXCJTYXZpbmcuLi5cIilcclxuICAgICAgOiAodGhpcy5fYnV0dG9uLnRleHRDb250ZW50ID0gdGhpcy5fb3JpZ2luYWxCdXR0b25UZXh0KTtcclxuICB9XHJcblxyXG4gIC8vKioqQ09ORklSTUFUSU9OIENBTExCQUNLICoqKlxyXG4gIHNldENhbGxiYWNrKGNhbGxiYWNrKSB7XHJcbiAgICB0aGlzLl9jYWxsYmFjayA9IGNhbGxiYWNrO1xyXG4gIH1cclxuXHJcbiAgLy8qKipBREQgRlVOQ1RJT05BTElUWSBUTyBUSEUgU0VURVZFTlRMSVNURU5FUlMqKipcclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9jYWxsYmFjaygpO1xyXG4gICAgfSk7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xyXG4gIC8vKioqQVBJIENPTlNUUlVDVE9SKioqXHJcbiAgY29uc3RydWN0b3IoeyBiYXNlVXJsLCBoZWFkZXJzIH0pIHtcclxuICAgIHRoaXMuX2Jhc2VVcmwgPSBiYXNlVXJsO1xyXG4gICAgdGhpcy5faGVhZGVycyA9IGhlYWRlcnM7XHJcbiAgfVxyXG5cclxuICAvLyoqKlJFTkRFUiBSRVNVTFQgRlJPTSBTRVJWRVIqKipcclxuICByZW5kZXJSZXN1bHQocmVzKSB7XHJcbiAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvciA6JHtyZXMuc3RhdHVzfWApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8qKipUTyBHRVQgVVNFUiBJTkZPIE1FVEhPRCoqKlxyXG4gIGFzeW5jIGdldFVzZXJJbmZvKCkge1xyXG4gICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KTtcclxuICAgIHJldHVybiB0aGlzLnJlbmRlclJlc3VsdChyZXMpO1xyXG4gIH1cclxuXHJcbiAgLy8qKipHRVQgSU5USUFMIENBUkRTIE1FVEhPRCoqKlxyXG4gIGFzeW5jIGdldEluaXRpYWxDYXJkcygpIHtcclxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gdGhpcy5yZW5kZXJSZXN1bHQocmVzKTtcclxuICB9XHJcblxyXG4gIC8vKioqRURJVCBQUk9GSUxFIE1FVEhPRCoqKlxyXG4gIGFzeW5jIGVkaXRQcm9maWxlKHsgdGl0bGUsIGRlc2NyaXB0aW9uIH0pIHtcclxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWU6IHRpdGxlLFxyXG4gICAgICAgIGFib3V0OiBkZXNjcmlwdGlvbixcclxuICAgICAgfSksXHJcbiAgICB9KTtcclxuICAgIHJldHVybiB0aGlzLnJlbmRlclJlc3VsdChyZXMpO1xyXG4gIH1cclxuXHJcbiAgLy8qKipBREQgQ0FSRCBNRVRIT0QqKipcclxuICBhc3luYyBhZGRDYXJkKHsgbmFtZSwgbGluayB9KSB7XHJcbiAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgbGluazogbGluayxcclxuICAgICAgfSksXHJcbiAgICB9KTtcclxuICAgIHJldHVybiB0aGlzLnJlbmRlclJlc3VsdChyZXMpO1xyXG4gIH1cclxuXHJcbiAgLy8qKipERUxFVEUgQ0FSRCBNRVRIT0QqKipcclxuICBhc3luYyBkZWxldGVDYXJkKGNhcmRJZCkge1xyXG4gICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KTtcclxuICAgIHJldHVybiB0aGlzLnJlbmRlclJlc3VsdChyZXMpO1xyXG4gIH1cclxuXHJcbiAgLy8qKipMSUtFIENBUkQgTUVUSE9EKioqXHJcbiAgbGlrZUNhcmQoY2FyZElkLCBpc0xpa2VkKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XHJcbiAgICAgIG1ldGhvZDogaXNMaWtlZCA/IFwiREVMRVRFXCIgOiBcIlBVVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLyoqKlVQREFURSBBVkFUQVIgTUVUSE9EKioqXHJcbiAgYXN5bmMgdXBkYXRlQXZhdGFyKHsgbGluayB9KSB7XHJcbiAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgYXZhdGFyOiBsaW5rLFxyXG4gICAgICB9KSxcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHRoaXMucmVuZGVyUmVzdWx0KHJlcyk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIC8vKioqU0VDVElPTiBDT05TVFJVQ1RPUioqKlxyXG4gIGNvbnN0cnVjdG9yKHsgcmVuZGVyZXIgfSwgY2xhc3NTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY2xhc3NTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICAvLyoqKklUVEVSQVRFIE9WRVIgVEhFIElURU1TIEFSUkFZICYgUkVOREVSIFRIRU0qKipcclxuICByZW5kZXJlckl0ZW1zID0gKGl0ZW1zKSA9PiB7XHJcbiAgICBpdGVtcy5yZXZlcnNlKCkuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICB0aGlzLmFkZEl0ZW0odGhpcy5fcmVuZGVyZXIoaXRlbSkpO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgLy8qKipBREQgRE9NIEVMRU1FTlQgIFRPIFRIRSBDT05UQUlORVIqKipcclxuICBhZGRJdGVtID0gKGVsZW1lbnQpID0+IHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gIH07XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcbi8vKioqUE9QVVAgSU1BR0UgQ09OU1RSVUNUT1IqKipcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2UgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIik7XHJcbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2VUaXRsZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5tb2RhbF9faW1hZ2UtdGl0bGVcIlxyXG4gICAgKTtcclxuICAgIC8vIGNvbnNvbGUubG9nKHRoaXMpO1xyXG4gIH1cclxuICAvLyoqKiBGVU5DVElPTkFMSVRZIFNFVFRJTkdTIE9QRU4vQ0xPU0UqKipcclxuICBvcGVuKHsgbmFtZSwgbGluayB9KSB7XHJcbiAgICBjb25zb2xlLmxvZyhuYW1lLCBsaW5rKTtcclxuICAgIHRoaXMuX3ByZXZpZXdJbWFnZS5zcmMgPSBsaW5rO1xyXG4gICAgdGhpcy5fcHJldmlld0ltYWdlLmFsdCA9IG5hbWU7XHJcbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2VUaXRsZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJDYXJkIiwiY29uc3RydWN0b3IiLCJkYXRhIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlSW1hZ2VDbGljayIsImhhbmRsZURlbGV0ZUNsaWNrIiwidGhpcyIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9pZCIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlRGVsZXRlQ2xpY2siLCJfZ2V0VGVtcGxhdGUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiZ2V0SWQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfaW1hZ2VFbGVtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9saWtlQnV0dG9uIiwiX2xpa2VDYXJkIiwiX2RlbGV0ZUJ1dHRvbiIsImRlbGV0ZUNhcmQiLCJfZWxlbWVudCIsInJlbW92ZSIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImdlbmVyYXRlQ2FyZCIsInNldEF0dHJpYnV0ZSIsInRleHRDb250ZW50IiwiRm9ybVZhbGlkYXRvciIsImZvcm1FbGVtZW50IiwiX3JlZiIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2Zvcm1FbGVtZW50IiwiX2lucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWxlbWVudCIsImFkZCIsIl9lcnJvckVsZW1lbnQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oaWRlSW5wdXRFcnJvciIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJpZCIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGFzSW52YWxpZElucHV0IiwiaW5wdXRMaXN0Iiwic29tZSIsIl90b2dnbGVCdXR0b25TdGF0ZSIsImRpc2FibGVTdWJtaXQiLCJfYnV0dG9uRWxlbWVudCIsInJlbW92ZUF0dHJpYnV0ZSIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiY2hlY2tWYWxpZGl0eSIsImVuYWJsZVZhbGlkYXRpb24iLCJyZXNldEZvcm0iLCJyZXNldCIsIk1vZGFsIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJvcGVuIiwiX2hhbmRsZUVzY0Nsb3NlIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZ0Iiwia2V5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJfY2xvc2VCdXR0b24iLCJ0YXJnZXQiLCJjdXJyZW50VGFyZ2V0IiwiUG9wdXBXaXRoRm9ybSIsIlBvcHVwIiwiZm9ybVN1Ym1pdCIsImZvcm1TZWxlY3RvciIsInN1cGVyIiwiX2Zvcm0iLCJfYnV0dG9uIiwiX29yaWdpbmFsQnV0dG9uVGV4dCIsIl9mb3JtU3VibWl0IiwiX2lucHV0TGlzdCIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0VmFsdWVzIiwiaW5wdXQiLCJ2YWx1ZSIsInByZXZlbnREZWZhdWx0IiwidmFsdWVzIiwicmVuZGVyU2F2aW5nIiwiaXNTYXZpbmciLCJjb25maWciLCJwcm9maWxlIiwicHJvZmlsZUVkaXRCdXR0b24iLCJwcm9maWxlQWRkQnV0dG9uIiwiZWRpdEltYWdlQnV0dG9uIiwicHJvZmlsZUVkaXRNb2RhbCIsImZvcm1MaXN0IiwiZm9ybVZhbGlkYXRvcnMiLCJ1c2VySW5mbyIsInRpdGxlU2VsZWN0b3IiLCJkZXNjcmlwdGlvblNlbGVjdG9yIiwiYXZhdGFyU2VsZWN0b3IiLCJfdGl0bGVFbGVtZW50IiwiX2Rlc2NyaXB0aW9uRWxlbWVudCIsIl9hdmF0YXJFbGVtZW50IiwiZ2V0VXNlckluZm8iLCJ1c2VyQ3VycmVudEluZm8iLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwic2V0VXNlckluZm8iLCJzZXRVc2VyQXZhdGFyIiwiZGVsZXRlQ29uZmlybWF0aW9uUG9wdXAiLCJzZXRDYWxsYmFjayIsImNhbGxiYWNrIiwiX2NhbGxiYWNrIiwiYXZhdGFyRWRpdFBvcHVwIiwiYXBpIiwidXBkYXRlQXZhdGFyIiwidGhlbiIsInJlcyIsImF2YXRhciIsImNhdGNoIiwiY29uc29sZSIsImVycm9yIiwiZmluYWxseSIsImJhc2VVcmwiLCJoZWFkZXJzIiwiX2Jhc2VVcmwiLCJfaGVhZGVycyIsInJlbmRlclJlc3VsdCIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJmZXRjaCIsImdldEluaXRpYWxDYXJkcyIsImVkaXRQcm9maWxlIiwiX3JlZjIiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImFib3V0IiwiYWRkQ2FyZCIsIl9yZWYzIiwiY2FyZElkIiwibGlrZUNhcmQiLCJpc0xpa2VkIiwiX3JlcXVlc3QiLCJfcmVmNCIsImF1dGhvcml6YXRpb24iLCJjYXJkc0NvbnRhaW5lciIsImNsYXNzU2VsZWN0b3IiLCJyZW5kZXJlciIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZW5kZXJlckl0ZW1zIiwiaXRlbXMiLCJyZXZlcnNlIiwiaXRlbSIsImFkZEl0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsInJlbmRlckNhcmQiLCJwcmV2aWV3UG9wdXAiLCJfcHJldmlld0ltYWdlIiwiX3ByZXZpZXdJbWFnZVRpdGxlIiwibG9nIiwic3JjIiwiYWx0IiwicHJvZmlsZUVkaXRQb3B1cCIsImNhcmQiLCJhZGRDYXJkUG9wdXAiLCJuZXdDYXJkIiwiYWRkQ2FyZEZvcm0iLCJjYXJkRGF0YSIsImZvcm0iLCJ2YWxpZGF0b3IiLCJmb3JtTmFtZSIsImdldEF0dHJpYnV0ZSIsInByb2ZpbGVGb3JtIl0sInNvdXJjZVJvb3QiOiIifQ==